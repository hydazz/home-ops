---
customization:
  extraKernelArgs:
    - i915.enable_guc=3 # Meteor Lake CPU & Intel iGPU
    - intel_iommu=on # PCI Passthrough
    - iommu=pt # PCI Passthrough
    - pcie_aspm=off # Disable PCIe ASPM
    - sysctl.kernel.kexec_load_disabled=1 # Meteor Lake CPU & Intel iGPU
    - -lockdown # Secure Boot / BPF
    - lockdown=integrity # Secure Boot / BPF
  systemExtensions:
    officialExtensions:
      - siderolabs/i915 # Intel iGPU
      - siderolabs/intel-ucode # Intel iGPU
      - siderolabs/mei # Intel iGPU
      - siderolabs/nfsrahead # NFS Performance
      {% if ENV.HAS_NVIDIA %}
      - siderolabs/nvidia-open-gpu-kernel-modules-production # NVIDIA GPU
      - siderolabs/nvidia-container-toolkit-production # NVIDIA GPU
      {% endif %}